# üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
pkill -f "next dev"
```

### 2. –ó–∞–ø—É—Å–∫ Next.js –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –ø–æ—Ä—Ç—É
```bash
PORT=3000 npm run dev
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ ngrok
```bash
ps aux | grep ngrok
# –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å strattera.ngrok.app:
ngrok http --domain=strattera.ngrok.app 3000
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
```bash
curl -X POST http://localhost:3000/api/telegram/message-templates \
-H "Content-Type: application/json" \
-d '{"action": "force_update", "key": "dummy", "template": "dummy"}'
```

---

## üéØ –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ WebApp**: https://strattera.ngrok.app/webapp
2. **–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä** –≤ –∫–æ—Ä–∑–∏–Ω—É
3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏**
4. **–û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `unpaid (0)`
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π "–Ø –æ–ø–ª–∞—Ç–∏–ª"

### –®–∞–≥ 2: –û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞

1. **–ù–∞–∂–º–∏—Ç–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª"** –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: `paid (1)`
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç: "–ò–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞—à–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞..."
- –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç: "–ù–∞–¥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É..." —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∞ –ø—Ä–∏—à–ª–∞"

### –®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã

1. **–ö–∞–∫ –∞–¥–º–∏–Ω –Ω–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∞ –ø—Ä–∏—à–ª–∞"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: `processing (2)`
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç: "‚ù§Ô∏è –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –≤–∞—Å –∑–∞ –ø–æ–∫—É–ø–∫—É!..." —Å –∫–Ω–æ–ø–∫–æ–π "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑"
- –ö—É—Ä—å–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç: "üëÄ –ù—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑..." —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–∏–≤—è–∑–∞—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä"

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"

1. **–ö–∞–∫ –∫—É—Ä—å–µ—Ä –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–≤—è–∑–∞—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä"**
2. **–ù–∞–∂–º–∏—Ç–µ "‚Üê –ù–∞–∑–∞–¥"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–æ–æ–±—â–µ–Ω–∏—é —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞
- –°–æ—Å—Ç–æ—è–Ω–∏–µ Redis –æ—á–∏—â–∞–µ—Ç—Å—è

### –®–∞–≥ 5: –í–≤–æ–¥ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞

1. **–ö–∞–∫ –∫—É—Ä—å–µ—Ä –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–≤—è–∑–∞—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä"**
2. **–í–≤–µ–¥–∏—Ç–µ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä –≤ —á–∞—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä: "RA123456789RU")

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: `shipped (3)`
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç: "üì¶ –û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏!..." —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Å—ã–ª–∫—É" –∏ "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑"
- –ö—É—Ä—å–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç: "–ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞..." —Å –∫–Ω–æ–ø–∫–æ–π "–ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä"

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. **–ö–∞–∫ –∫–ª–∏–µ–Ω—Ç –Ω–∞–∂–º–∏—Ç–µ "–û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Å—ã–ª–∫—É"**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞: `https://www.pochta.ru/tracking#RA123456789RU`

### –®–∞–≥ 7: –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞

1. **–ö–∞–∫ –∫—É—Ä—å–µ—Ä –Ω–∞–∂–º–∏—Ç–µ "–ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä"**
2. **–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä** (–Ω–∞–ø—Ä–∏–º–µ—Ä: "@https://track24.ru/tracking/RA123456789RU")

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–º
- –ö–Ω–æ–ø–∫–∞ "–û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Å—ã–ª–∫—É" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–≤

### –¢–µ—Å—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä
**–í–≤–æ–¥:** `RA123456789RU`  
**URL:** `https://www.pochta.ru/tracking#RA123456789RU`

### –¢–µ—Å—Ç 2: –°—Å—ã–ª–∫–∞ —Å @
**–í–≤–æ–¥:** `@https://track24.ru/tracking/RA123456789RU`  
**URL:** `https://track24.ru/tracking/RA123456789RU`

### –¢–µ—Å—Ç 3: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞
**–í–≤–æ–¥:** `https://track24.ru/tracking/RA123456789RU`  
**URL:** `https://track24.ru/tracking/RA123456789RU`

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å Next.js —Å–ª–µ–¥–∏—Ç–µ –∑–∞:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
üìß Sending notifications for new order 24XXX

# –û–±—Ä–∞–±–æ—Ç–∫–∞ "–Ø –æ–ø–ª–∞—Ç–∏–ª"
üîÑ [WEBAPP BOT] Processing callback: i_paid
üìä Order 24XXX status changed: 0 -> 1

# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
üìä Order 24XXX status changed: 1 -> 2
Order 24XXX is being processed. Payment confirmed.

# –í–≤–æ–¥ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞
üìä Order 24XXX status changed: 2 -> 3
Order 24XXX has been shipped
```

---

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook
curl "https://api.telegram.org/bot7754514670:AAFswWZxch4OwaLcmQp7LMzr6E3AdJ5woPg/getWebhookInfo"

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook
npm run telegram:webhook:setup
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis
npm run redis:check

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤
node scripts/check-telegram-bots.ts
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç–µ —à–∞–±–ª–æ–Ω—ã
curl -X POST http://localhost:3000/api/telegram/message-templates \
-H "Content-Type: application/json" \
-d '{"action": "force_update", "key": "dummy", "template": "dummy"}'

# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
curl -X DELETE http://localhost:3000/api/telegram/message-templates
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `unpaid`
- [ ] –ü–æ—Å–ª–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª" —Å—Ç–∞—Ç—É—Å `paid`, –∫–ª–∏–µ–Ω—Ç –∏ –∞–¥–º–∏–Ω –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å `processing`, –∫—É—Ä—å–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞–Ω–∏–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞
- [ ] –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Ç—Ä–µ–∫–∞ —Å—Ç–∞—Ç—É—Å `shipped`, –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä
- [ ] –ö–Ω–æ–ø–∫–∞ "–û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ—Å—ã–ª–∫—É" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä" –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ç—Ä–µ–∫
- [ ] –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –æ—à–∏–±–∫–∞–º (–Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏)

---

## üéâ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é:

‚úÖ **–ö–ª–∏–µ–Ω—Ç—ã** –ø–æ–ª—É—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –º–æ–≥—É—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Å—ã–ª–∫–∏  
‚úÖ **–ö—É—Ä—å–µ—Ä—ã** –ø–æ–ª—É—á–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–µ–∫-–Ω–æ–º–µ—Ä–∞–º–∏  
‚úÖ **–ê–¥–º–∏–Ω—ã** –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã  
‚úÖ **–°–∏—Å—Ç–µ–º–∞** —É—Å—Ç–æ–π—á–∏–≤–∞ –∏ –∏–º–µ–µ—Ç fallback –ª–æ–≥–∏–∫—É

üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** 