# üéØ –£–ª—É—á—à–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —á–∞—Ç–µ

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–º–µ–Ω –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ —á–∞—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤.

## ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω –∫–ª–∏–µ–Ω—Ç–æ–≤**
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
  1. –ò–º—è + –§–∞–º–∏–ª–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
  2. –¢–æ–ª—å–∫–æ –∏–º—è (–µ—Å–ª–∏ –Ω–µ—Ç —Ñ–∞–º–∏–ª–∏–∏)
  3. @username (–µ—Å–ª–∏ –Ω–µ—Ç –∏–º–µ–Ω–∏)
  4. ID: [telegram_id] (–µ—Å–ª–∏ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ)

### 2. **–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤**

#### üü¢ **VIP –∫–ª–∏–µ–Ω—Ç (Active)**
- **–ö—Ä–∏—Ç–µ—Ä–∏–π:** –ï—Å—Ç—å –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã (status = 4)
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä:** –ó–µ–ª–µ–Ω–∞—è —Ç–æ—á–∫–∞
- **–ë–µ–π–¥–∂:** ‚≠ê VIP –∫–ª–∏–µ–Ω—Ç
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** "X –∑–∞–∫–∞–∑–æ–≤ ‚Ä¢ Y‚ÇΩ"

#### üü° **–í —Ä–∞–±–æ—Ç–µ (Potential)**
- **–ö—Ä–∏—Ç–µ—Ä–∏–π:** –ï—Å—Ç—å –∑–∞–∫–∞–∑—ã, –Ω–æ –Ω–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä:** –ñ–µ–ª—Ç–∞—è —Ç–æ—á–∫–∞
- **–ë–µ–π–¥–∂:** üîÑ –í —Ä–∞–±–æ—Ç–µ
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** "X –∑–∞–∫–∞–∑–æ–≤ –≤ —Ä–∞–±–æ—Ç–µ"

#### ‚ö™ **–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç (New)**
- **–ö—Ä–∏—Ç–µ—Ä–∏–π:** –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä:** –°–µ—Ä–∞—è —Ç–æ—á–∫–∞
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** "X —Å–æ–æ–±—â–µ–Ω–∏–π"

### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
–ö–ª–∏–µ–Ω—Ç—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
1. VIP –∫–ª–∏–µ–Ω—Ç—ã (—Å –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞–º–∏)
2. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (—Å –∑–∞–∫–∞–∑–∞–º–∏ –≤ —Ä–∞–±–æ—Ç–µ)
3. –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
4. –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å
5. –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### 4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫**
–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ:
- –ò–º–µ–Ω–∏ –∏ —Ñ–∞–º–∏–ª–∏–∏
- Username (@username)
- Telegram ID

### 5. **–õ–µ–≥–µ–Ω–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ª–µ–≥–µ–Ω–¥–∞, –æ–±—ä—è—Å–Ω—è—é—â–∞—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### API –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### `src/app/api/messages/route.ts`
```typescript
// –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ –æ—Ç–≤–µ—Ç–µ API
interface User {
  tg_id: string;
  first_name: string | null;
  last_name: string | null;
  username: string | null;
  orderStats: {
    totalOrders: number;
    deliveredOrders: number;
    totalSpent: string;
    hasOrders: boolean;
    clientStatus: 'new' | 'potential' | 'active';
  };
}
```

#### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
```typescript
let clientStatus = 'new';
if (deliveredOrders > 0) {
  clientStatus = 'active';    // –ï—Å—Ç—å –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
} else if (totalOrders > 0) {
  clientStatus = 'potential'; // –ï—Å—Ç—å –∑–∞–∫–∞–∑—ã, –Ω–æ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### `MessageSidebarImproved.tsx`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ–Ω
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `getClientName()` –∏ `getClientStatusText()`
- –£–ª—É—á—à–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–π–¥–∂–∏ —Å—Ç–∞—Ç—É—Å–æ–≤

#### `ClientStatusLegend.tsx` (–ù–æ–≤—ã–π)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ª–µ–≥–µ–Ω–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ

#### `MessagesContext.tsx`
- –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `User` —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤

## üí∞ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É–º–º

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —É–º–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—É–º–º:
- –î–æ 1000‚ÇΩ: "500 ‚ÇΩ"
- –î–æ 1–ú‚ÇΩ: "15–ö ‚ÇΩ"
- –°–≤—ã—à–µ 1–ú‚ÇΩ: "1.5–ú ‚ÇΩ"

## üé® –î–∏–∑–∞–π–Ω

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- **–ê–∫—Ç–∏–≤–Ω—ã–π:** `bg-green-500` (–∑–µ–ª–µ–Ω—ã–π)
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π:** `bg-yellow-500` (–∂–µ–ª—Ç—ã–π)
- **–ù–æ–≤—ã–π:** `bg-gray-400` (—Å–µ—Ä—ã–π)

### –ë–µ–π–¥–∂–∏
- **VIP:** –ó–µ–ª–µ–Ω—ã–π –±–µ–π–¥–∂ —Å –∑–≤–µ–∑–¥–æ–π ‚≠ê
- **–í —Ä–∞–±–æ—Ç–µ:** –ñ–µ–ª—Ç—ã–π –±–µ–π–¥–∂ —Å —Å–∏–º–≤–æ–ª–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è üîÑ

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è:** –ü–æ–∫–∞–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–º–µ–Ω –≤–º–µ—Å—Ç–æ ID
2. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:** VIP –∫–ª–∏–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ –Ω–∞–≤–µ—Ä—Ö—É
3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞
4. **–£–¥–æ–±—Å—Ç–≤–æ:** –õ–µ–≥–µ–Ω–¥–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã
5. **–ü–æ–∏—Å–∫:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–æ–±—â–µ–Ω–∏–π: `http://localhost:3000/messages`
2. –í –ª–µ–≤–æ–º —Å–∞–π–¥–±–∞—Ä–µ —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
3. –¶–≤–µ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞
4. –ù–∞–∂–º–∏—Ç–µ "–°—Ç–∞—Ç—É—Å—ã" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–µ–≥–µ–Ω–¥—ã
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, username –∏–ª–∏ ID

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ VIP –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö –æ—Ç VIP –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —Å–∏—Å—Ç–µ–º–æ–π 