# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å Algolia –Ω–∞ MiniSearch - –ó–∞–≤–µ—Ä—à–µ–Ω–∞

## üéØ –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ Algolia –Ω–∞ MiniSearch –≤ –ø—Ä–æ–µ–∫—Ç–µ NEXTADMIN WebApp. MiniSearch –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ MiniSearch

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
- **–ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä**: –ù–µ—Ç —Ç—è–∂–µ–ª—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ù–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫**: –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏
- **–ü–æ–∏—Å–∫ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É**: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ
- **–ë—É—Å—Ç–∏–Ω–≥ –ø–æ–ª–µ–π**: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –±—Ä–µ–Ω–¥–æ–≤
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Ü–µ–Ω–µ, –Ω–∞–ª–∏—á–∏—é

### –ü—Ä–æ—Å—Ç–æ—Ç–∞
- **–ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–õ–µ–≥–∫–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **TypeScript –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

## üì¶ –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –£–¥–∞–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞–∫–µ—Ç—ã:
- algoliasearch (4.25.2)
- @algolia/autocomplete-js (1.19.2)  
- react-instantsearch (7.16.0)
```

**–≠–∫–æ–Ω–æ–º–∏—è**: ~37 –ø–∞–∫–µ—Ç–æ–≤ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ bundle size

## üîß –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –î–æ–±–∞–≤–ª–µ–Ω –æ–¥–∏–Ω –ø–∞–∫–µ—Ç:
+ minisearch (^7.1.0)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```
src/lib/services/
‚îú‚îÄ‚îÄ minisearch.service.ts          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞
‚îî‚îÄ‚îÄ algolia.service.ts             # ‚ùå –£–¥–∞–ª–µ–Ω

src/app/webapp/_components/
‚îú‚îÄ‚îÄ MiniSearchComponent.tsx        # ‚úÖ –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∏—Å–∫–∞
‚îú‚îÄ‚îÄ AlgoliaModernSearch.tsx        # ‚ùå –£–¥–∞–ª–µ–Ω
‚îî‚îÄ‚îÄ AlgoliaSearchComponent.tsx     # ‚ùå –£–¥–∞–ª–µ–Ω
```

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```
src/app/api/algolia/               # ‚ùå –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞ –ø–∞–ø–∫–∞
src/libs/crawlIndex.ts             # ‚ùå –£–¥–∞–ª–µ–Ω
src/components/Layouts/header/search-input/  # ‚ùå –£–¥–∞–ª–µ–Ω
```

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å shadcn/ui

–ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `Input` - –ø–æ–ª–µ –≤–≤–æ–¥–∞
- `Button` - –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π  
- `Card` - –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò–∫–æ–Ω–∫–∏ –∏–∑ `lucide-react`

## üîç –§—É–Ω–∫—Ü–∏–∏ MiniSearchService

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
```typescript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
MiniSearchService.initialize(products: SearchProduct[])

// –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
MiniSearchService.search(query: string, options: {
  limit?: number;
  categoryId?: number; 
  inStockOnly?: boolean;
  minPrice?: number;
  maxPrice?: number;
})

// –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
MiniSearchService.getSuggestions(query: string, limit: number)

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–º
MiniSearchService.addProduct(product: SearchProduct)
MiniSearchService.updateProduct(product: SearchProduct)  
MiniSearchService.removeProduct(productId: number)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
```typescript
const searchOptions = {
  fields: ['title', 'description', 'category_name', 'brand', 'tags'],
  storeFields: ['title', 'description', 'price', 'old_price', 'stock_quantity'],
  searchOptions: {
    boost: { title: 2, brand: 1.5 }, // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª–µ–π
    fuzzy: 0.2,                      // –ù–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫
    prefix: true                     // –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É
  }
}
```

## üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç MiniSearchComponent

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–î–µ–±–∞—É–Ω—Å**: 300ms –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ API
- **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è**: –£–º–Ω–æ–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- **–§–∏–ª—å—Ç—Ä—ã**: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ü–µ–Ω—ã, –Ω–∞–ª–∏—á–∏–µ
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ

### –ü—Ä–æ–ø—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```typescript
interface MiniSearchComponentProps {
  onProductSelect?: (product: SearchProduct) => void;
  placeholder?: string;
  showCategories?: boolean;
  className?: string;
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ header
```tsx
<MiniSearchComponent 
  placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..."
  className="header-search"
  onProductSelect={(product) => {
    window.location.href = `/webapp/products/${product.id}`;
  }}
/>
```

## üé® –°—Ç–∏–ª–∏ Tailwind CSS

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```css
/* –°—Ç–∏–ª–∏ –¥–ª—è MiniSearch –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ */
.header-search {
  @apply w-full;
}

.header-search input {
  @apply h-10 px-4 pl-10 pr-10 text-sm;
  @apply bg-white border border-gray-200 rounded-lg;
  @apply focus:outline-none focus:ring-2 focus:ring-telegram-primary;
}

/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ */
.search-results-card {
  @apply bg-white border border-gray-200 rounded-lg shadow-lg;
}

.search-result-item {
  @apply p-3 hover:bg-gray-50 border-b border-gray-100;
}
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π TelegramHeader

Header –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MiniSearch:

```tsx
// –°—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç
import { AlgoliaModernSearch } from './AlgoliaModernSearch';

// –ù–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç  
import MiniSearchComponent from './MiniSearchComponent';

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
<div className="webapp-header-search" role="search">
  <MiniSearchComponent 
    placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..."
    className="header-search"
    onProductSelect={(product) => {
      window.location.href = `/webapp/products/${product.id}`;
    }}
  />
</div>
```

## üßπ –û—á–∏—Å—Ç–∫–∞ middleware

–£–¥–∞–ª–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Algolia –∏–∑ middleware:
```typescript
// –£–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞:
pathname.startsWith('/api/algolia') ||
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ç–æ–≤–∞—Ä—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –ú–µ–Ω—å—à–∏–π bundle size
- ‚úÖ –õ—É—á—à–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram WebApp
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ngrok
- ‚úÖ TypeScript –±–µ–∑ –æ—à–∏–±–æ–∫

## üöÄ –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–ê**

**–î–∞—Ç–∞**: 26 –¥–µ–∫–∞–±—Ä—è 2024

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://strattera.ngrok.app/webapp

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é**: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤  
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –£—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
1. **WebWorker**: –í—ã–Ω–æ—Å –ø–æ–∏—Å–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
2. **Service Worker**: –û—Ñ–ª–∞–π–Ω –ø–æ–∏—Å–∫
3. **ElasticSearch**: –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ –±—É–¥—É—â–µ–º

---

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**: MiniSearch –ø–æ–∫–∞–∑–∞–ª –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∫ –∑–∞–º–µ–Ω–∞ Algolia. –ü–æ–∏—Å–∫ —Å—Ç–∞–ª –±—ã—Å—Ç—Ä–µ–µ, –ø—Ä–æ—â–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ production. 