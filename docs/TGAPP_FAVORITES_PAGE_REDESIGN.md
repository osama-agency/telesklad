# Редизайн страницы избранного в Telegram WebApp

## Обзор изменений

Полностью переработан дизайн страницы избранного для соответствия современному стилю каталога с использованием Tailwind CSS.

## Ключевые улучшения

### 1. Единый дизайн карточек товаров

Карточки товаров теперь идентичны карточкам в каталоге:
- Современный дизайн с `rounded-xl` и тенями
- Правильные отступы и вертикальный ритм
- Поддержка темной темы
- Hover-эффекты и анимации

### 2. Улучшенные состояния страницы

**Состояние загрузки:**
- Использует компонент `Skeleton` из shadcn/ui
- Анимированные плейсхолдеры
- Сохраняет структуру карточек

**Пустое состояние:**
- Центрированный дизайн с иконкой в круге
- Понятные сообщения для пользователя
- Кнопка перехода в каталог
- Разные стили для авторизованных и неавторизованных

### 3. Оптимизация производительности

**Централизованное управление избранным:**
- Использует `FavoritesContext` для единого источника данных
- Предотвращает множественные запросы к API
- Кэширование в localStorage для быстрого отображения

**Оптимистичные обновления:**
- Мгновенный отклик UI
- Откат при ошибках
- Синхронизация между компонентами

### 4. Улучшения UX

**Заголовок страницы:**
- Отображает количество товаров
- Правильное склонение: "1 товар", "2 товара", "5 товаров"

**Обработка состояния "Нет в наличии":**
- Заблокированная кнопка с соответствующим текстом
- Визуальное отличие от доступных товаров

## Технические детали

### Структура карточки товара

```jsx
<div className="group relative bg-white dark:bg-gray-800/60 rounded-xl ...">
  {/* Кнопка избранного */}
  <div className="absolute top-2 right-2 z-10">
    <FavoriteButton productId={product.id} />
  </div>
  
  {/* Изображение */}
  <div className="p-4 pb-2">
    <div className="relative w-full aspect-square ...">
      <Image ... />
    </div>
  </div>
  
  {/* Информация */}
  <div className="flex flex-col flex-1 px-4 pb-4 space-y-2">
    <h3>Название</h3>
    <p>Цена</p>
    <div className="mt-auto pt-2">
      <AddToCartButton ... />
    </div>
  </div>
</div>
```

### FavoritesContext API

```typescript
interface FavoritesContextType {
  favoritesCount: number;
  favoriteIds: number[];
  toggleFavorite: (productId: number) => Promise<void>;
  isLoading: boolean;
  hasFavorites: boolean;
}
```

## Результат

1. **Единообразие**: Страница избранного визуально соответствует каталогу
2. **Производительность**: Нет множественных запросов, быстрая загрузка
3. **UX**: Понятные состояния, быстрый отклик, удобная навигация
4. **Темная тема**: Полная поддержка с правильными контрастами

Пользователи получают современный, быстрый и удобный интерфейс для управления избранными товарами.