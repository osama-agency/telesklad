# üöÄ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ —Å node-telegram-bot-api –Ω–∞ grammY

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –§–∞–π–ª—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ node-telegram-bot-api:
1. `src/lib/services/TelegramBotWorker.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook
2. `src/lib/services/SupportTelegramBotService.ts` - —Å–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –£—è–∑–≤–∏–º–æ—Å—Ç–∏:
- 5 moderate severity vulnerabilities –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö request –∏ tough-cookie

## üéØ –¶–µ–ª—å –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–∏—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—É—Ç–µ–º –∑–∞–º–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é grammY.

## üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ (3 —Ñ–∞–∑—ã)

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (30 –º–∏–Ω—É—Ç)
1. ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. ‚¨ú –£—Å—Ç–∞–Ω–æ–≤–∫–∞ grammY –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å node-telegram-bot-api
4. ‚¨ú –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ grammY

### –§–∞–∑–∞ 2: –ú–∏–≥—Ä–∞—Ü–∏—è TelegramBotWorker (2 —á–∞—Å–∞)
1. ‚¨ú –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª `TelegramBotWorkerGrammy.ts`
2. ‚¨ú –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
3. ‚¨ú –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ callback_query
4. ‚¨ú –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
5. ‚¨ú –ó–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –§–∞–∑–∞ 3: –ú–∏–≥—Ä–∞—Ü–∏—è SupportTelegramBotService (1 —á–∞—Å)
1. ‚¨ú –û–±–Ω–æ–≤–∏—Ç—å SupportTelegramBotService
2. ‚¨ú –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. ‚¨ú –£–¥–∞–ª–∏—Ç—å node-telegram-bot-api –∏–∑ package.json
4. ‚¨ú –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

**1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞:**
```typescript
// –ë—ã–ª–æ
import TelegramBot from 'node-telegram-bot-api';
const bot = new TelegramBot(token, { polling: false });

// –°—Ç–∞–ª–æ
import { Bot } from 'grammy';
const bot = new Bot(token);
```

**2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**
```typescript
// –ë—ã–ª–æ
bot.on('message', (msg) => {
  const chatId = msg.chat.id;
  bot.sendMessage(chatId, 'Hello');
});

// –°—Ç–∞–ª–æ
bot.on('message', async (ctx) => {
  await ctx.reply('Hello');
});
```

**3. –û–±—Ä–∞–±–æ—Ç–∫–∞ callback:**
```typescript
// –ë—ã–ª–æ
bot.on('callback_query', (query) => {
  bot.answerCallbackQuery(query.id);
  bot.editMessageText('Updated', {
    chat_id: query.message.chat.id,
    message_id: query.message.message_id
  });
});

// –°—Ç–∞–ª–æ
bot.on('callback_query', async (ctx) => {
  await ctx.answerCallbackQuery();
  await ctx.editMessageText('Updated');
});
```

**4. Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
```typescript
// –ë—ã–ª–æ
bot.processUpdate(req.body);

// –°—Ç–∞–ª–æ
await bot.handleUpdate(req.body);
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: 0 —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤–º–µ—Å—Ç–æ 5
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
3. **TypeScript**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
4. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å**: –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
5. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏–∑ –∫–æ—Ä–æ–±–∫–∏

## üö® –†–∏—Å–∫–∏ –∏ –∏—Ö –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è

1. **–†–∏—Å–∫**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ API –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   **–†–µ—à–µ–Ω–∏–µ**: –ü–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

2. **–†–∏—Å–∫**: –†–∞–∑–ª–∏—á–∏—è –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫
   **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ grammY

3. **–†–∏—Å–∫**: –ü—Ä–æ–±–ª–µ–º—ã —Å webhook
   **–†–µ—à–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏

## üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏

- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 3-4 —á–∞—Å–∞
- **–§–∞–∑–∞ 1**: 30 –º–∏–Ω—É—Ç
- **–§–∞–∑–∞ 2**: 2 —á–∞—Å–∞
- **–§–∞–∑–∞ 3**: 1 —á–∞—Å
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 30 –º–∏–Ω—É—Ç

## üéØ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ù–∞—á–∞—Ç—å —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ grammY:
```bash
npm install grammy
```

–ò —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

---
*–ü–ª–∞–Ω —Å–æ–∑–¥–∞–Ω 29 –¥–µ–∫–∞–±—Ä—è 2024 –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ NEXTADMIN*
