# Как включить обратно страницу входа (авторизацию) в Next.js API

Если вы временно отключали авторизацию на API-эндпоинтах для тестирования, выполните следующие шаги, чтобы вернуть защиту и страницу входа:

---

## 1. Найдите закомментированные проверки авторизации

В каждом API-файле, где вы отключали авторизацию, найдите строки:

```ts
// const session = await getServerSession();
// if (!session?.user?.email) {
//   return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
// }
```

---

## 2. Раскомментируйте проверки

Сделайте так:

```ts
const session = await getServerSession();
if (!session?.user?.email) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
}
```

---

## 3. Верните обращения к session

Если вы убирали обращения к session (например, заменяли `email: session.user.email` на заглушку), верните их обратно:

```ts
email: session.user.email
```

---

## 4. Проверьте все API-файлы

Используйте поиск по проекту по ключевым словам `getServerSession` и `Unauthorized`, чтобы убедиться, что все проверки восстановлены.

---

## 5. Перезапустите сервер

После внесения изменений перезапустите сервер разработки:

```
npm run dev
```

---

## 6. Проверьте работу

- Откройте приложение в браузере.
- Попробуйте зайти на защищённые страницы — должна появиться страница входа.
- После входа все данные должны быть доступны.

---

**Важно:**
- Не забудьте вернуть авторизацию на всех нужных эндпоинтах для безопасности данных!
- Если используете git, можно просто откатить изменения к коммиту с рабочей авторизацией. 