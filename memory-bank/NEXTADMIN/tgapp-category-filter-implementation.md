# TgApp Category Filter Implementation

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ tgapp —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Catalyst UI Kit, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥ —Å—Ç–∏–ª—å tgapp.

## üöÄ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. API –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **–§–∞–π–ª**: `src/app/api/webapp/categories/route.ts`
- **–§—É–Ω–∫—Ü–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—è `brand` –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞–∂–¥–æ–π

### 2. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### TgButton (`src/app/tgapp/_components/TgButton.tsx`)
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Button` –∏–∑ Catalyst UI Kit
- –ó–µ–ª–µ–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ tgapp
- –í–∞—Ä–∏–∞–Ω—Ç—ã: `solid`, `outline`, `ghost`, `selected`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ haptic feedback –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- TouchTarget –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX –Ω–∞ —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö

#### TgBadge (`src/app/tgapp/_components/TgBadge.tsx`)
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Badge` –∏–∑ Catalyst UI Kit
- –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã: `green`, `gray`, `blue`
- –ü–æ–∫–∞–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö

#### CategoryFilter (`src/app/tgapp/_components/CategoryFilter.tsx`)
- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–∏–ª—å—Ç—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- Responsive –¥–∏–∑–∞–π–Ω: –∫–æ–ª–ª–∞–ø—Å–∏—Ä—É–µ–º—ã–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
- Haptic feedback –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –•—É–∫ useProductsWithSubscriptions
- **–§–∞–π–ª**: `src/hooks/useProductsWithSubscriptions.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `brand` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –±—Ä–µ–Ω–¥—É
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useEffect –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è brand

### 2. API –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- **–§–∞–π–ª**: `src/app/api/webapp/products/route.ts`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `brand` –≤ –∑–∞–ø—Ä–æ—Å–µ
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –¢–æ–≤–∞—Ä—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –ø–æ–ª—é `brand` –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–¥–∞–Ω

### 3. VirtualProductCatalog
- **–§–∞–π–ª**: `src/app/tgapp/_components/VirtualProductCatalog.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `category` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ category –≤ —Ö—É–∫ useProductsWithSubscriptions

### 4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
- **–§–∞–π–ª**: `src/app/tgapp/catalog/page.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ CategoryFilter
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π —á–µ—Ä–µ–∑ useState

## üì± UX/UI –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ö–æ–ª–ª–∞–ø—Å–∏—Ä—É–µ–º—ã–π dropdown —Å –∫–Ω–æ–ø–∫–æ–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –∫–Ω–æ–ø–∫–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏-—Ñ–∏–ª—å—Ç—Ä—ã
- Truncate –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã

### –û–±—â–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- Haptic feedback –¥–ª—è Telegram WebApp
- –ó–µ–ª–µ–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ tgapp
- –ü–æ–∫–∞–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –≤ badges
- –ö–Ω–æ–ø–∫–∞ "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" –¥–ª—è —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–∞
- Loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å skeleton
- –°–∫—Ä—ã—Ç–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
- –ê–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: `bg-green-500`, `text-white`
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: `border-green-500`, `text-green-600`
- Badges: `bg-green-500/15`, `text-green-700`
- Dark mode –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- Mobile-first –ø–æ–¥—Ö–æ–¥
- Breakpoint `md:` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –º–æ–±–∏–ª—å–Ω–æ–π –∏ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
- Flexible layout —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CSS Grid –∏ Flexbox

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `@heroicons/react` –¥–ª—è –∏–∫–æ–Ω–æ–∫ (FunnelIcon, ChevronDownIcon)
- `clsx` –¥–ª—è conditional –∫–ª–∞—Å—Å–æ–≤
- React hooks: `useState`, `useEffect`

### Telegram WebApp API
- `window.Telegram.WebApp.HapticFeedback.selectionChanged()` –¥–ª—è —Ç–∞–∫—Ç–∏–ª—å–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

## üö¶ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**: API –∑–∞–ø—Ä–æ—Å –∫ `/api/webapp/categories`
2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
3. **–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**: Haptic feedback + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–µ—Ä–µ–¥–∞—á–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ ProductCatalog
5. **API –∑–∞–ø—Ä–æ—Å**: –¢–æ–≤–∞—Ä—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –ø–æ–ª—é `brand`

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª—è `brand` –≤ —Ç–∞–±–ª–∏—Ü–µ `products`
- –ü–æ–¥—Å—á–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±—Ä–µ–Ω–¥–∞ —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤:
  - `show_in_webapp: true`
  - `deleted_at: null`
  - `ancestry: { contains: '/' }` (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ü–æ–¥—Å—á–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Promise.all`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –Ω—É–ª–µ–≤—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–æ–≤

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Catalyst UI Kit
2. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å tgapp
3. **UX –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: Haptic feedback, responsive –¥–∏–∑–∞–π–Ω
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
5. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: ARIA-–∞—Ç—Ä–∏–±—É—Ç—ã, keyboard navigation
6. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
2. **–ê–Ω–∏–º–∞—Ü–∏–∏**: Smooth transitions –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ dropdown
3. **–ü–æ–∏—Å–∫**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
4. **–ò–µ—Ä–∞—Ä—Ö–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
5. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –¢—Ä–µ–∫–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
6. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ 