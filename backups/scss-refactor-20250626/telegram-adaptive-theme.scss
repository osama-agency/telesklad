/* ============================================
   TELEGRAM ADAPTIVE THEME SYSTEM
   Плавный переход между светлой и темной темами
   ============================================ */

/* Базовые переменные для светлой темы (по умолчанию) */
:root {
  /* Основные цвета */
  --tg-primary: #48C928;
  --tg-primary-dark: #3AA120;
  --tg-secondary: #92e200;
  --tg-accent: #d7f369;
  
  /* Фоны */
  --tg-background: #ffffff;
  --tg-surface: #f8f9fa;
  
  /* Текст */
  --tg-text: #000000;
  --tg-text-secondary: #666666;
  
  /* Границы и тени */
  --tg-border: #e0e0e0;
  --tg-shadow: rgba(0, 0, 0, 0.1);
  
  /* Empty states */
  --tg-empty-icon: #D1D5DB;
  --tg-empty-text: #6B7280;
  
  /* Градиенты */
  --tg-gradient-primary: linear-gradient(135deg, #48C928 0%, #3AA120 100%);
  --tg-gradient-secondary: linear-gradient(135deg, #92e200 0%, #48C928 100%);
  
  /* Специальные цвета */
  --tg-cart-empty-primary: #92e200;
  --tg-cart-empty-secondary: #00c100;
  --tg-cart-empty-accent: #d7f369;
  
  /* Статусы */
  --tg-success: #10b981;
  --tg-warning: #f59e0b;
  --tg-error: #ef4444;
  --tg-info: #3b82f6;
  
  /* Переходы */
  --tg-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --tg-transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --tg-transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Темная тема */
[data-theme="dark"] {
  /* Основные цвета - приглушенные зеленые */
  --tg-primary: #2d7a1e;
  --tg-primary-dark: #1f5415;
  --tg-secondary: #5c8f00;
  --tg-accent: #8fb347;
  
  /* Фоны */
  --tg-background: #1a1a1a;
  --tg-surface: #2d2d2d;
  
  /* Текст */
  --tg-text: #ffffff;
  --tg-text-secondary: #b0b0b0;
  
  /* Границы и тени */
  --tg-border: #3d3d3d;
  --tg-shadow: rgba(0, 0, 0, 0.5);
  
  /* Empty states */
  --tg-empty-icon: #4B5563;
  --tg-empty-text: #9CA3AF;
  
  /* Градиенты */
  --tg-gradient-primary: linear-gradient(135deg, #2d7a1e 0%, #1f5415 100%);
  --tg-gradient-secondary: linear-gradient(135deg, #5c8f00 0%, #2d7a1e 100%);
  
  /* Специальные цвета для темной темы */
  --tg-cart-empty-primary: #5c8f00;
  --tg-cart-empty-secondary: #1f5415;
  --tg-cart-empty-accent: #8fb347;
  
  /* Статусы - адаптированные для темной темы */
  --tg-success: #059669;
  --tg-warning: #d97706;
  --tg-error: #dc2626;
  --tg-info: #2563eb;
}

/* Плавные переходы при смене темы */
* {
  transition: 
    background-color var(--tg-transition-normal),
    color var(--tg-transition-normal),
    border-color var(--tg-transition-normal),
    box-shadow var(--tg-transition-normal);
}

/* Отключение переходов во время быстрой смены темы */
[data-theme-transitioning="true"] * {
  transition: none !important;
}

/* ============================================
   СОВМЕСТИМОСТЬ С СУЩЕСТВУЮЩИМИ СТИЛЯМИ
   ============================================ */

/* Мапинг старых переменных на новые */
:root {
  /* Старые переменные → новые адаптивные */
  --tg-bg-color: var(--tg-background);
  --tg-text-color: var(--tg-text);
  --tg-hint-color: var(--tg-text-secondary);
  --tg-link-color: var(--tg-primary);
  --tg-button-color: var(--tg-primary);
  --tg-button-text-color: #ffffff;
  --tg-secondary-bg-color: var(--tg-surface);
}

/* ============================================
   СПЕЦИАЛЬНЫЕ КЛАССЫ ДЛЯ КОМПОНЕНТОВ
   ============================================ */

/* Адаптивные фоны */
.tg-bg-primary {
  background-color: var(--tg-background);
}

.tg-bg-surface {
  background-color: var(--tg-surface);
}

/* Адаптивный текст */
.tg-text-primary {
  color: var(--tg-text);
}

.tg-text-secondary {
  color: var(--tg-text-secondary);
}

/* Адаптивные кнопки */
.tg-btn-primary {
  background: var(--tg-gradient-primary);
  color: #ffffff;
  border: none;
  
  &:hover {
    background: var(--tg-primary-dark);
  }
}

.tg-btn-secondary {
  background: transparent;
  color: var(--tg-primary);
  border: 1px solid var(--tg-primary);
  
  &:hover {
    background: var(--tg-primary);
    color: #ffffff;
  }
}

/* Адаптивные границы */
.tg-border {
  border-color: var(--tg-border);
}

/* Адаптивные тени */
.tg-shadow {
  box-shadow: 0 4px 16px var(--tg-shadow);
}

/* ============================================
   EMPTY STATES АДАПТАЦИЯ
   ============================================ */

.empty-state {
  .empty-state-icon {
    color: var(--tg-empty-icon);
    
    /* Специальная обработка для SVG иконок */
    svg {
      color: var(--tg-empty-icon);
      fill: var(--tg-empty-icon);
    }
  }
  
  .empty-state-title {
    color: var(--tg-text);
  }
  
  .empty-state-subtitle {
    color: var(--tg-empty-text);
  }
  
  .empty-state-button {
    background: var(--tg-gradient-primary);
    color: #ffffff;
  }
}

/* ============================================
   CART EMPTY ICON АДАПТАЦИЯ
   ============================================ */

.cart-empty-icon {
  /* Адаптивные цвета для иконки корзины */
  .cart-primary {
    fill: var(--tg-cart-empty-primary);
  }
  
  .cart-secondary {
    fill: var(--tg-cart-empty-secondary);
  }
  
  .cart-accent {
    fill: var(--tg-cart-empty-accent);
  }
}

/* ============================================
   TELEGRAM HEADER АДАПТАЦИЯ
   ============================================ */

.telegram-design-header {
  background-color: var(--tg-background);
  color: var(--tg-text);
  border-bottom: 1px solid var(--tg-border);
  
  .header-action-button {
    color: var(--tg-text);
    
    &:hover {
      background-color: var(--tg-surface);
    }
    
    &.active {
      color: var(--tg-primary);
      background-color: var(--tg-surface);
    }
  }
  
  .header-action-badge {
    background-color: var(--tg-primary);
    color: #ffffff;
  }
}

/* ============================================
   МОДАЛЬНЫЕ ОКНА АДАПТАЦИЯ
   ============================================ */

.modal-overlay {
  background-color: rgba(0, 0, 0, 0.5);
  
  [data-theme="dark"] & {
    background-color: rgba(0, 0, 0, 0.7);
  }
}

.modal-content {
  background-color: var(--tg-background);
  color: var(--tg-text);
  border: 1px solid var(--tg-border);
}

/* ============================================
   ФОРМЫ АДАПТАЦИЯ
   ============================================ */

.input-str,
.input-container input {
  background-color: var(--tg-surface);
  border: 1px solid var(--tg-border);
  color: var(--tg-text);
  
  &:focus {
    border-color: var(--tg-primary);
    background-color: var(--tg-background);
  }
  
  &::placeholder {
    color: var(--tg-text-secondary);
  }
}

/* ============================================
   КАРТОЧКИ ТОВАРОВ АДАПТАЦИЯ
   ============================================ */

.product-card,
.main-block {
  background-color: var(--tg-background);
  border: 1px solid var(--tg-border);
  box-shadow: 0 2px 8px var(--tg-shadow);
  
  .product-title {
    color: var(--tg-text);
  }
  
  .price {
    color: var(--tg-text);
  }
  
  .old-price {
    color: var(--tg-text-secondary);
  }
}

/* ============================================
   СТАТУСЫ И ИНДИКАТОРЫ
   ============================================ */

.status-success {
  color: var(--tg-success);
}

.status-warning {
  color: var(--tg-warning);
}

.status-error {
  color: var(--tg-error);
}

.status-info {
  color: var(--tg-info);
}

/* ============================================
   ОТЛАДКА И МОНИТОРИНГ
   ============================================ */

/* Индикатор текущей темы (для разработки) */
.theme-debug::after {
  content: attr(data-theme);
  position: fixed;
  top: 10px;
  right: 10px;
  background: var(--tg-primary);
  color: #ffffff;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  z-index: 9999;
  pointer-events: none;
}

/* Плавная анимация переходов */
@media (prefers-reduced-motion: no-preference) {
  * {
    transition-duration: var(--tg-transition-normal);
  }
}

/* Отключение анимаций для пользователей с ограниченными возможностями */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation: none !important;
  }
}
