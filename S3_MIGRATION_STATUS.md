# üìä –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ S3 - –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 1. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (`scripts/migrate-images-to-s3.js`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (`scripts/debug-s3-credentials.js`)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Beget S3
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (aws-sdk, axios, dotenv)

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `S3Service` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ —Å—Ç–∞—Ä—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ API webapp –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ–≤—ã–º–∏ URL
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ —Å—Ç–∞—Ä–æ–≥–æ, —Ç–∞–∫ –∏ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ URL

### 3. **–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ –ù–∞–π–¥–µ–Ω–æ **32 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤** –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±—â–∏–π –æ–±—ä–µ–º: ~2.4 MB –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (active_storage)

## ‚ö†Ô∏è –¢–µ–∫—É—â–µ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Beget S3 credentials
```
‚ùå –û—à–∏–±–∫–∞: InvalidAccessKeyId
üìã Access Key: ESAPKF1C43H8KGOXTXME
üîß Endpoint: https://s3.ru1.storage.beget.cloud
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. Access Key –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ S3 –≤ –ø–∞–Ω–µ–ª–∏ Beget
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π –¥–ª—è Beget Cloud Storage

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –†–∞–±–æ—Ç–∞—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ
- ‚úÖ **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –≤ webapp
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** `strattera.tgapp.online`
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –ø–µ—Ä–µ–±–æ–µ–≤
- ‚úÖ **Fallback —Å–∏—Å—Ç–µ–º–∞** –≥–æ—Ç–æ–≤–∞

### –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –û—Ç–ª–∞–¥–∫–∞ credentials
node scripts/debug-s3-credentials.js

# –¢–µ—Å—Ç –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
node scripts/test-single-image.js

# –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–∫–æ–≥–¥–∞ credentials –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)
node scripts/migrate-images-to-s3.js migrate
```

## üîß –®–∞–≥–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Beget –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Cloud Storage –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Access Key –∏ Secret Key
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –±–∞–∫–µ—Ç–∞ `2c11548b454d-eldar-agency`

### 2. –û–±–Ω–æ–≤–∏—Ç—å credentials
```env
# –í .env.local
S3_ACCESS_KEY="–ü–†–ê–í–ò–õ–¨–ù–´–ô_ACCESS_KEY"
S3_SECRET_KEY="–ü–†–ê–í–ò–õ–¨–ù–´–ô_SECRET_KEY"
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```bash
# –¢–µ—Å—Ç
node scripts/debug-s3-credentials.js

# –ú–∏–≥—Ä–∞—Ü–∏—è
node scripts/migrate-images-to-s3.js migrate
```

### 4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –Ω–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å `S3Service.getImageUrl()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Beget S3.

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

- üöÄ **–ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üîí **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å** –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞  
- üíæ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ –æ–±–ª–∞–∫–µ
- üåç **CDN –ø–æ–¥–¥–µ—Ä–∂–∫–∞** Beget
- üìä **–õ—É—á—à–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã: 95%**

–í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤–∞. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å credentials –≤ Beget –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –ø–æ—ç—Ç–æ–º—É –Ω–µ—Ç —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ –≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏.

**–í—Ä–µ–º—è –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ:** 10-15 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö credentials. 