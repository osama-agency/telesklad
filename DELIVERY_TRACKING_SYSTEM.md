# üì¶ –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ Telesklad –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏** –æ—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- **–í–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º** —Å–æ —Å—Ä–µ–¥–Ω–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ—Å—Ç–∞–≤–∫–∏
- **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤** –∏ –≤—ã—è–≤–ª—è—Ç—å –ø—Ä–æ—Å—Ä–æ—á–∫–∏

## üí± –í–∞–∂–Ω–æ: –õ–æ–≥–∏–∫–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç –∏ –¥–æ—Å—Ç–∞–≤–∫–∏

### üîÑ **–ö—É—Ä—Å –ª–∏—Ä—ã**:
- –ü—Ä–∏ **—Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫—É–ø–∫–∏** –∫—É—Ä—Å –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –¶–µ–Ω–∞ –≤ –ª–∏—Ä–∞—Ö —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ **—Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ —Å—Ç–∞—Ç—É—Å **"–û–ø–ª–∞—á–µ–Ω–æ"** –∫—É—Ä—Å –ª–∏—Ä—ã **—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞**
- –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —Ä–∞—Å—á–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É—Ä—Å

### üöö **–î–æ—Å—Ç–∞–≤–∫–∞**:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫—É–ø–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ **–ù–ï —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è**
- –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–∏**
- –í –ø–æ–ª–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É" –≤–≤–æ–¥–∏—Ç—Å—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### Purchase (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
```sql
-- –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
orderDate         DateTime?      -- –î–∞—Ç–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (–∫–æ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–ª "sent")
receivedDate      DateTime?      -- –î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ (–∫–æ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å —Å—Ç–∞–ª "received") 
deliveryDays      Int?           -- –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
supplierDeliveryDays Int?        -- –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
```

### SupplierStats (–Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞)
```sql
supplier                String   @unique     -- –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
totalPurchases          Int      @default(0) -- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫—É–ø–æ–∫
completedPurchases      Int      @default(0) -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫
avgDeliveryDays         Float    @default(20.0) -- –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
totalDeliveryDays       Int      @default(0) -- –°—É–º–º–∞ –≤—Å–µ—Ö –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
minDeliveryDays         Int?     -- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
maxDeliveryDays         Int?     -- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
lastDeliveryDate        DateTime? -- –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏ (draft)
```typescript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫—É–ø–∫–∏ –∫—É—Ä—Å –ª–∏—Ä—ã –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
// –¶–µ–Ω–∞ –≤ –ª–∏—Ä–∞—Ö —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
const purchase = await createPurchase({
  items: cartItems,
  supplier: "Kalyon Company",
  // –ë–ï–ó –¥–æ—Å—Ç–∞–≤–∫–∏ - –æ–Ω–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–∏
});
```

### 2. –û–ø–ª–∞—Ç–∞ –∑–∞–∫—É–ø–∫–∏ (paid)
```typescript
// –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ —Å—Ç–∞—Ç—É—Å "paid" –∫—É—Ä—Å –ª–∏—Ä—ã –§–ò–ö–°–ò–†–£–ï–¢–°–Ø
await updatePurchaseStatus(id, 'paid');
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å –ª–∏—Ä—ã –∏–∑ –±–∞–∑—ã
// exchangeRate = currentTRYRate
```

### 3. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (sent)
```typescript
// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "sent" —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è orderDate
await updatePurchaseStatus(id, 'sent');
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è orderDate = new Date()
```

### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ø—É—Ç–∏ (in_transit)
```typescript
// –í —Ç–∞–±–ª–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏
const daysInTransit = Math.ceil(
  (new Date().getTime() - orderDate.getTime()) / (1000 * 60 * 60 * 24)
);

// –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:
// üü¢ –ó–µ–ª–µ–Ω—ã–π: –º–µ–Ω—å—à–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Å—Ä–æ–∫–∞
// üü° –ñ–µ–ª—Ç—ã–π: –±–ª–∏–∑–∫–æ –∫ –æ–∂–∏–¥–∞–µ–º–æ–º—É —Å—Ä–æ–∫—É  
// üî¥ –ö—Ä–∞—Å–Ω—ã–π: –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ
```

### 5. –û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (received)
```typescript
// –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –ò —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
const receiveData = {
  deliveryDays: 18,              // –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
  additionalExpenses: 1500,      // –î–û–°–¢–ê–í–ö–ê —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∑–¥–µ—Å—å
  notes: "–¢–æ–≤–∞—Ä –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏"
};

await receivePurchase(purchaseId, receiveData);
```

### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
await SupplierStatsService.updateDeliveryStats(
  supplier,
  deliveryDays, 
  orderDate,
  receivedDate
);
```

## üé® UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫—É–ø–æ–∫ —Å –∫–æ–ª–æ–Ω–∫–æ–π "–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏"
```tsx
// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞
const getDeliveryInfo = (purchase: Purchase) => {
  switch (purchase.status) {
    case 'draft':
      return <span className="text-gray-400">‚Äî</span>;
    
    case 'in_transit':
      const daysInTransit = calculateDaysInTransit(purchase.orderDate);
      const expectedDays = getExpectedDays(purchase.supplier);
      
      if (daysInTransit > expectedDays + 3) {
        return (
          <div className="text-red-600">
            <span>{daysInTransit} –¥–Ω–µ–π</span>
            <span className="text-xs">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>
          </div>
        );
      }
      break;
    
    case 'received':
      return (
        <div className="text-green-600">
          <span>{purchase.deliveryDays} –¥–Ω–µ–π</span>
          <span className="text-xs">–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</span>
        </div>
      );
  }
};
```

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏—è
```tsx
<ReceivePurchaseModal
  isOpen={showReceiveModal}
  onClose={() => setShowReceiveModal(false)}
  purchaseId={purchase.id}
  purchaseName={getMainProduct(purchase.items)}
  onReceived={handleReceiveSuccess}
/>
```

## üîå API Endpoints

### POST `/api/purchases/{id}/receive`
–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
```typescript
interface ReceivePurchaseRequest {
  deliveryDays: number;                    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  receivedQuantities?: Record<number, number>; // –ü–æ–ª—É—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
  additionalExpenses?: number;             // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É
  notes?: string;                         // –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
}
```

### GET `/api/suppliers/stats`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≤—Å–µ–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
```typescript
interface SupplierStatsResponse {
  supplier: string;
  avgDeliveryDays: number;
  totalPurchases: number;
  completedPurchases: number;
  completionRate: number;
  minDeliveryDays: number;
  maxDeliveryDays: number;
  lastDeliveryDate: Date;
}
```

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
```typescript
// –¢–æ–ø-5 —Å–∞–º—ã—Ö –±—ã—Å—Ç—Ä—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
const fastestSuppliers = await SupplierStatsService.getAllSuppliersStats();
fastestSuppliers
  .sort((a, b) => a.avgDeliveryDays - b.avgDeliveryDays)
  .slice(0, 5);

// –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —Å –ø—Ä–æ—Å—Ä–æ—á–∫–∞–º–∏
const problematicSuppliers = fastestSuppliers.filter(
  s => s.avgDeliveryDays > 25
);
```

### –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–æ–≤
```typescript
// –û–∂–∏–¥–∞–µ–º–∞—è –¥–∞—Ç–∞ –ø–æ—Å—Ç–∞–≤–∫–∏
const expectedDate = await SupplierStatsService.calculateExpectedDeliveryDate(
  supplier,
  orderDate
);

// –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–¥–æ—Å—Ä–æ—á–Ω–æ/–≤ —Å—Ä–æ–∫/–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ)
const deliveryStatus = SupplierStatsService.getDeliveryStatus(
  orderDate,
  receivedDate,
  expectedDays
);
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
```bash
npm run test:delivery
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–º
```typescript
const purchase = await createPurchase({
  items: cartItems,
  supplier: "Kalyon Company",  // –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
  notes: "–ó–∞–∫–∞–∑ –Ω–∞ —Ñ–µ–≤—Ä–∞–ª—å 2025"
});
```

### 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
```typescript
// –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è orderDate
await updatePurchaseStatus(purchase.id, 'sent');
```

### 4. –û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
await receivePurchase(purchase.id, {
  deliveryDays: 15,  // –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç–∞–≤–∏–ª–∏ –∑–∞ 15 –¥–Ω–µ–π
  additionalExpenses: 2000,
  notes: "–í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏"
});
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### KPI —Å–∏—Å—Ç–µ–º—ã
- **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º** - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å
- **–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫** - % –∑–∞–∫–∞–∑–æ–≤ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–∑–∂–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ
- **–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤** - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –ø—Ä–æ–≥–Ω–æ–∑–Ω–æ–≥–æ
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤–æ–∫** - % –∑–∞–∫–∞–∑–æ–≤ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ä–∞–Ω—å—à–µ —Å—Ä–æ–∫–∞

### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- üü¢ **–ó–µ–ª–µ–Ω—ã–π** - –¥–æ—Å—Ä–æ—á–Ω–æ (–Ω–∞ 2+ –¥–Ω—è —Ä–∞–Ω—å—à–µ)
- üü° **–ñ–µ–ª—Ç—ã–π** - –≤ —Å—Ä–æ–∫ (¬±2 –¥–Ω—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ)
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** - –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ (–Ω–∞ 3+ –¥–Ω—è –ø–æ–∑–∂–µ)

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –§–∞–∑–∞ 1 (–¢–µ–∫—É—â–∞—è)
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏—è
- ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ
- ‚úÖ API –¥–ª—è –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏—è

### –§–∞–∑–∞ 2 (–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
- üìä –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥–Ω–æ–∑—ã –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏  
- üìà –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ—Å—Ä–æ—á–∫–∞—Ö

### –§–∞–∑–∞ 3 (–ë—É–¥—É—â–µ–µ)
- üó∫Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–æ–π
- üì± Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –¥–æ—Å—Ç–∞–≤–∫–∏
- ü§ñ ML-–º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- üìä –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
npx prisma migrate dev --name add_delivery_tracking
npx prisma generate
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫—É–ø–æ–∫
```sql
-- –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫—É–ø–æ–∫ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "received" 
-- –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
UPDATE purchases 
SET deliveryDays = 20, supplierDeliveryDays = 20
WHERE status = 'received' AND deliveryDays IS NULL;
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```typescript
const DEFAULT_DELIVERY_DAYS = 20;  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 20 –¥–Ω–µ–π
const EARLY_THRESHOLD = -2;        // –î–æ—Å—Ä–æ—á–Ω–æ –µ—Å–ª–∏ –Ω–∞ 2+ –¥–Ω—è —Ä–∞–Ω—å—à–µ  
const LATE_THRESHOLD = 3;          // –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –µ—Å–ª–∏ –Ω–∞ 3+ –¥–Ω—è –ø–æ–∑–∂–µ
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `npm run test:delivery` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞. 