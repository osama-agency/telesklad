# ‚úÖ –ú–ò–ì–†–ê–¶–ò–Ø S3 –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- **–î–∞—Ç–∞**: 21 –∏—é–Ω—è 2025, 02:42 MSK
- **–í—Å–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: 32
- **–£—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ**: 31 (96.9%)
- **–û—à–∏–±–∫–∏**: 1 (3.1% - —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ)
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö**: ~2.4 –ú–ë
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~45 —Å–µ–∫—É–Ω–¥

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **Credentials**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ Access Key (`ESAPKF1C43H8KG**O**XTXME` ‚Üí `ESAPKF1C43H8KG**Q**XTXME`)
2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –£—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Beget S3
3. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º (`ACL: 'public-read'`)

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Beget S3 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```
Endpoint: https://s3.ru1.storage.beget.cloud
Bucket: 2c11548b454d-eldar-agency
Region: ru-1
Access Key: ESAPKF1C43H8KGQXTXME
Force Path Style: true
```

### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```
–°—Ç–∞—Ä—ã–π: https://strattera.tgapp.online/storage/{prefix1}/{prefix2}/{key}
–ù–æ–≤—ã–π:  https://s3.ru1.storage.beget.cloud/2c11548b454d-eldar-agency/products/{key}
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ S3
–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ –ø–∞–ø–∫–µ `products/`:
```
2c11548b454d-eldar-agency/
‚îî‚îÄ‚îÄ products/
    ‚îú‚îÄ‚îÄ c97rbdpwwik0r9lnwr2g6vv4uzwv
    ‚îú‚îÄ‚îÄ pqqqxiphlr4viig0xy0kwk8ojin1
    ‚îú‚îÄ‚îÄ uu05zvh5x2reumuh9w6jxo8q0ytb
    ‚îî‚îÄ‚îÄ ... (28 –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤)
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. S3Service (`src/lib/services/s3.ts`)
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Beget S3 –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω fallback –Ω–∞ —Å—Ç–∞—Ä–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ –∏ —Å—Ç–∞—Ä—ã–º–∏ URL

### 2. Webapp API (`src/app/api/webapp/products/route.ts`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ fallback URL –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

## üß™ –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ **DNS —Ä–µ–∑–æ–ª—é—Ü–∏—è**: `s3.ru1.storage.beget.cloud` ‚Üí `193.168.47.225, 193.168.47.228`
- ‚úÖ **HTTPS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: HTTP 200
- ‚úÖ **Bucket –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: HTTP 403 (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- ‚úÖ **S3 –æ–ø–µ—Ä–∞—Ü–∏–∏**: listBuckets, headBucket, listObjects, putObject, getObject, deleteObject

### –¢–µ—Å—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞**: –£—Å–ø–µ—à–Ω–æ
- ‚úÖ **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—Ä—è–º—ã–º —Å—Å—ã–ª–∫–∞–º
- ‚úÖ **Content-Type**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞

## üìã –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –£—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (31)
- –¢–æ–≤–∞—Ä ID 28: `c97rbdpwwik0r9lnwr2g6vv4uzwv` (49,990 –±–∞–π—Ç)
- –¢–æ–≤–∞—Ä ID 29: `pqqqxiphlr4viig0xy0kwk8ojin1` (49,852 –±–∞–π—Ç)
- –¢–æ–≤–∞—Ä ID 31: `uu05zvh5x2reumuh9w6jxo8q0ytb` (77,589 –±–∞–π—Ç)
- ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ 28 —Ñ–∞–π–ª–æ–≤)

### –ù–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (1)
- ‚ùå –¢–æ–≤–∞—Ä ID 5: `vzl9o064lzoxyn6pnyx28t0gs4gy` - —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å—Ç–∞—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–µ (HTTP 404)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ
1. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ **S3Service –æ–±–Ω–æ–≤–ª–µ–Ω** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
3. ‚úÖ **Fallback –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–ª–µ–¥–∏—Ç—å –∑–∞ —Ä–∞–±–æ—Ç–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ webapp
2. **–û—á–∏—Å—Ç–∫–∞**: –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å CDN –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è

### –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è**: –ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**: –ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–±–æ—Ç–µ

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –Ω–æ–≤—ã—Ö URL
- https://s3.ru1.storage.beget.cloud/2c11548b454d-eldar-agency/products/c97rbdpwwik0r9lnwr2g6vv4uzwv
- https://s3.ru1.storage.beget.cloud/2c11548b454d-eldar-agency/products/pqqqxiphlr4viig0xy0kwk8ojin1

### –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- Beget S3: https://cp.beget.com/

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ webapp API
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `S3Service.getImageUrl()`

---

**üéâ –ú–ò–ì–†–ê–¶–ò–Ø –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê –ò –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£!** 